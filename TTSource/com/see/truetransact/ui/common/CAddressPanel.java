/*
 * Copyright 2003-2020 FINCuro Solutions Pvt Ltd. All rights reserved.
 *
 * This software and its components are the property of FINCuro Solutions Pvt Limited and its affiliates, through authorship and acquisition.
 **
 *
 * AddressPanel.java
 *
 * Created on September 2, 2003, 12:44 PM
 */

package com.see.truetransact.ui.common;

import com.see.truetransact.clientproxy.ProxyFactory;
import com.see.truetransact.commonutil.CommonConstants;
import com.see.truetransact.clientutil.ComboBoxModel;
import com.see.truetransact.clientutil.Address;
import java.util.ArrayList;
import java.util.HashMap;

/**
 *
 * @author  Pranav
 */
public class CAddressPanel extends com.see.truetransact.uicomponent.CPanel {
    
    /** Creates new form AddressPanel */
    public CAddressPanel() {
        initComponents();
        setFieldLength();
        internationalize();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        java.awt.GridBagConstraints gridBagConstraints;

        lblStreet = new com.see.truetransact.uicomponent.CLabel();
        txtStreet = new com.see.truetransact.uicomponent.CTextField();
        lblCountry = new com.see.truetransact.uicomponent.CLabel();
        cboCountry = new com.see.truetransact.uicomponent.CComboBox();
        lblState = new com.see.truetransact.uicomponent.CLabel();
        cboState = new com.see.truetransact.uicomponent.CComboBox();
        lblCity = new com.see.truetransact.uicomponent.CLabel();
        cboCity = new com.see.truetransact.uicomponent.CComboBox();
        lblPincode = new com.see.truetransact.uicomponent.CLabel();
        txtPincode = new com.see.truetransact.uicomponent.CTextField();
        lblArea = new com.see.truetransact.uicomponent.CLabel();
        txtArea = new com.see.truetransact.uicomponent.CTextField();

        setLayout(new java.awt.GridBagLayout());

        lblStreet.setText("Street");
        lblStreet.setName("lblStreet");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(lblStreet, gridBagConstraints);

        txtStreet.setMaxLength(256);
        txtStreet.setMinimumSize(new java.awt.Dimension(200, 21));
        txtStreet.setPreferredSize(new java.awt.Dimension(200, 21));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(txtStreet, gridBagConstraints);

        lblCountry.setText("Country");
        lblCountry.setName("lblCountry");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(lblCountry, gridBagConstraints);

        cboCountry.setEditable(true);
        cboCountry.setMinimumSize(new java.awt.Dimension(100, 21));
        cboCountry.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboCountryItemStateChanged(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(cboCountry, gridBagConstraints);

        lblState.setText("State");
        lblState.setName("lblState");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(lblState, gridBagConstraints);

        cboState.setEditable(true);
        cboState.setMinimumSize(new java.awt.Dimension(100, 21));
        cboState.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboStateItemStateChanged(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(cboState, gridBagConstraints);

        lblCity.setText("City");
        lblCity.setName("lblCity");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(lblCity, gridBagConstraints);

        cboCity.setEditable(true);
        cboCity.setMinimumSize(new java.awt.Dimension(100, 21));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(cboCity, gridBagConstraints);

        lblPincode.setText("Pincode");
        lblPincode.setName("lblPincode");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(lblPincode, gridBagConstraints);

        txtPincode.setMaxLength(16);
        txtPincode.setMinimumSize(new java.awt.Dimension(50, 21));
        txtPincode.setPreferredSize(new java.awt.Dimension(50, 21));
        txtPincode.setValidation(new com.see.truetransact.uivalidation.PincodeValidation_IN());
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(txtPincode, gridBagConstraints);

        lblArea.setText("Area");
        lblArea.setName("lblArea");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(lblArea, gridBagConstraints);

        txtArea.setMaxLength(128);
        txtArea.setMinimumSize(new java.awt.Dimension(200, 21));
        txtArea.setPreferredSize(new java.awt.Dimension(200, 21));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        add(txtArea, gridBagConstraints);

    }//GEN-END:initComponents
    
    private void cboStateItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboStateItemStateChanged
        // Add your handling code here:
        /* Include the code for filling up the country,
         * by default only country will be enabled
         */
        //cboCity.setModel(getComboModel("CUSTOMER.CITY"));
    }//GEN-LAST:event_cboStateItemStateChanged
    
    private void cboCountryItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboCountryItemStateChanged
        // Add your handling code here:
        //cboState.setModel(getComboModel("CUSTOMER.STATE"));
    }//GEN-LAST:event_cboCountryItemStateChanged
    
    /* This method is overriden from the parent hierarchy. It will make all the
     * components available in the CAddressPanel as disabled or enabled
     */
    public void setEnabled(boolean enabled) {
        txtStreet.setEnabled(enabled);
        txtArea.setEnabled(enabled);
        cboCountry.setEnabled(enabled);
        cboState.setEnabled(enabled);
        cboCity.setEnabled(enabled);
        txtPincode.setEnabled(enabled);
    }
    
    /* This method will clear the panel 
     */
    public void clearPanel() {
        txtStreet.setText("");
        txtArea.setText("");
        cboCountry.setSelectedIndex(0);
        cboState.setSelectedIndex(0);
        cboCity.setSelectedIndex(0);
        txtPincode.setText("");
    }
    
    
    /** This method is used to take care of the internationalization Issues
     */
    private void setFieldLength() {
        txtStreet.setMaxLength(256);
        txtArea.setMaxLength(128);
        txtPincode.setMaxLength(16);
    }
    
    public void setAddress(Address address) {
        txtStreet.setText(address.getStreet());
        txtArea.setText(address.getArea());
        cboCountry.setSelectedItem(((ComboBoxModel) cboCountry.getModel()).getDataForKey(address.getCountry()));
        cboState.setSelectedItem(((ComboBoxModel) cboState.getModel()).getDataForKey(address.getState()));
        cboCity.setSelectedItem(((ComboBoxModel) cboCity.getModel()).getDataForKey(address.getCity()));
        txtPincode.setText(address.getPincode());
    }

    public Address getAddress() {
        Address address = new Address();
        address.setStreet(txtStreet.getText());
        address.setArea(txtArea.getText());
        address.setCountry((String) ((ComboBoxModel) cboCountry.getModel()).getKeyForSelected());
        address.setState((String) ((ComboBoxModel) cboState.getModel()).getKeyForSelected());
        address.setCity((String) ((ComboBoxModel) cboCity.getModel()).getKeyForSelected());
        address.setPincode(txtPincode.getText());
        
        return address;
    }
    /** This method is used to take care of the internationalization Issues
     */
    private void internationalize() {
        
        CAddressPanelRB panelRB = new CAddressPanelRB();
        lblStreet.setText(panelRB.getString("lblStreet"));
        lblArea.setText(panelRB.getString("lblArea"));
        lblCountry.setText(panelRB.getString("lblCountry"));
        lblState.setText(panelRB.getString("lblState"));
        lblCity.setText(panelRB.getString("lblCity"));
        lblPincode.setText(panelRB.getString("lblPincode"));
        
        fillDropdown();
        /* Include the code for filling up the country,
         * by default only country will be enabled
         */
       /* cboCountry.setModel(getComboModel("CUSTOMER.COUNTRY"));
        
        // Right now we are not checking dependency, will load all the data
        cboState.setModel(getComboModel("CUSTOMER.STATE"));
        cboCity.setModel(getComboModel("CUSTOMER.CITY"));*/
    }
    
    /*private ComboBoxModel getComboModel(String lookupId) {
        
        /* populate the combo boxe, the Lookup bean will be used for that,
         * this will give back two values
         * one value will be used for display on combo box and the other
         * for exact value of that element
         */
       /* HashMap comboMap = new java.util.HashMap();
        comboMap.put(CommonConstants.JNDI, "LookUpJNDI");
        comboMap.put(CommonConstants.HOME, "common.lookup.LookUpHome");
        comboMap.put(CommonConstants.REMOTE, "common.lookup.LookUp");
        HashMap keyValue = null;
        ArrayList key = null;
        ArrayList value = null;
        try {
            ProxyFactory proxy = ProxyFactory.createProxy();
            
            // create combo box for instrument type
            keyValue = getDataMap(null, lookupId, comboMap);
            key = (ArrayList)keyValue.get("KEY");
            value = (ArrayList)keyValue.get("VALUE");
            return new ComboBoxModel(key, value);
        } catch (Exception e) {
            System.err.println( "Exception " + e + " caught" );
            e.printStackTrace();
        }
        
        return null;
    }
    
    private HashMap getDataMap(String mapName, String query, HashMap comboMap) {
        HashMap keyValue = null;
        try {
            ProxyFactory proxy = ProxyFactory.createProxy();
            HashMap h = new HashMap();
            h.put("mapname", mapName);
            h.put("paramforquery", query);
            
            keyValue = (HashMap) proxy.executeQuery(h, comboMap);
        } catch (Exception e) {
            System.err.println( "Exception " + e + " caught" );
            e.printStackTrace();
        }
        return keyValue;
    }*/
    
  
    
    /** To fill the comboboxes */
    private void fillDropdown() {
        try{
        proxy = ProxyFactory.createProxy();
        final HashMap param = new java.util.HashMap();
        param.put(CommonConstants.MAP_NAME,null);
        
        final ArrayList lookupKey = new ArrayList();
        lookupKey.add("CUSTOMER.COUNTRY");
        lookupKey.add("CUSTOMER.CITY");
        lookupKey.add("CUSTOMER.STATE");
        param.put(CommonConstants.PARAMFORQUERY, lookupKey);
        
        final HashMap lookupValues = populateData(param);
        
        fillData((HashMap)lookupValues.get("CUSTOMER.COUNTRY"));
        cboCountry.setModel(new ComboBoxModel(key,value));
        
        fillData((HashMap)lookupValues.get("CUSTOMER.CITY"));
        cboCity.setModel(new ComboBoxModel(key,value));
        
        fillData((HashMap)lookupValues.get("CUSTOMER.STATE"));
        cboState.setModel(new ComboBoxModel(key,value));
        
        proxy = null;
        }catch(Exception e){
            e.printStackTrace();
        }
    }
    
    /** To set the key & value for comboboxes */
    private void fillData(HashMap keyValue)  throws Exception{
        key = (ArrayList)keyValue.get(CommonConstants.KEY);
        value = (ArrayList)keyValue.get(CommonConstants.VALUE);
    }
    
    /** To get data for comboboxes */
    private HashMap populateData(HashMap obj)  throws Exception{
        final HashMap lookupMap = new HashMap();
        lookupMap.put(CommonConstants.JNDI, "LookUpJNDI");
        lookupMap.put(CommonConstants.HOME, "common.lookup.LookUpHome");
        lookupMap.put(CommonConstants.REMOTE, "common.lookup.LookUp");
        final HashMap keyValue = proxy.executeQuery(obj,lookupMap);
       // log.info("Got HashMap");
        return keyValue;
    }
    
    
    
    
    
    public String getStreet() {
        return txtStreet.getText();
    }
    
    public void setStreet(String street) {
        txtStreet.setText(street);
    }
    
    public String getArea() {
        return txtArea.getText();
    }
    
    public void setArea(String area) {
        txtArea.setText(area);
    }
    
    public String getCountry() {
        return (String)cboCountry.getSelectedItem();
    }
    
    public void setCountry(String country) {
        /* This means that the country that the user trying to select is
         * already there in the database
         */
        cboCountry.setSelectedItem(country);
    }
    
    public String getState() {
        return (String)cboState.getSelectedItem();
    }
    
    public void setState(String state) {
        /* This means that the state that the user trying to select is
         * already there in the database
         */
        cboState.setSelectedItem(state);
    }
    
    public String getCity() {
        return (String)cboCity.getSelectedItem();
    }
    
    public void setCity(String city) {
        /* This means that the city that the user trying to select is
         * already there in the database
         */
        cboCity.setSelectedItem(city);
    }
    
    public String getPincode() {
        return txtPincode.getText();
    }
    
    public void setPincode(String pincode) {
        txtPincode.setText(pincode);
    }

    public void setCboCountryName(String cboCustAddrCountry) {
        cboCountry.setName(cboCustAddrCountry);
    }
    public void setCboCityName(String cboCustAddrCity) {
        cboCity.setName(cboCustAddrCity);
    }
    public void setCboStateName(String cboCustAddrState) {
        cboState.setName(cboCustAddrState);
    }
    public void setTxtAreaName(String txtCustAddrArea) {
        txtArea.setName(txtCustAddrArea);
    }
    public void setTxtStreetName(String txtCustAddrStreet) {
        txtStreet.setName(txtCustAddrStreet);
    }
    public void setTxtPincodeName(String txtCustAddrPincode) {
        txtPincode.setName(txtCustAddrPincode);
    }
    
    //To populate combo box values
    private ProxyFactory proxy;
    private ArrayList key;
    private ArrayList value;
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private com.see.truetransact.uicomponent.CComboBox cboCity;
    private com.see.truetransact.uicomponent.CComboBox cboCountry;
    private com.see.truetransact.uicomponent.CComboBox cboState;
    private com.see.truetransact.uicomponent.CLabel lblArea;
    private com.see.truetransact.uicomponent.CLabel lblCity;
    private com.see.truetransact.uicomponent.CLabel lblCountry;
    private com.see.truetransact.uicomponent.CLabel lblPincode;
    private com.see.truetransact.uicomponent.CLabel lblState;
    private com.see.truetransact.uicomponent.CLabel lblStreet;
    private com.see.truetransact.uicomponent.CTextField txtArea;
    private com.see.truetransact.uicomponent.CTextField txtPincode;
    private com.see.truetransact.uicomponent.CTextField txtStreet;
    // End of variables declaration//GEN-END:variables
}
