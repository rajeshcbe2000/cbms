<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sql-map PUBLIC "-//iBATIS.com//DTD SQL Map 1.0//EN" "http://www.ibatis.com/dtd/sql-map.dtd">
<sql-map name="ShareProductTOMap">

	<!-- Use ShareProductTO object (JavaBean) properties as parameters for insert. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="insertShareProductTO" inline-parameters="true">
        INSERT INTO SHARE_CONF_DETAILS
        (SHARE_TYPE, FACE_VALUE, ISSUED_CAPITAL, SUBSCRIBED_CAPITAL, PAIDUP_CAPITAL, WITHDRAWAL_RESTRICTION, MAXIMUM_SHARE, ADMISSION_FEE, APPLICATION_FEE, 
        SHARE_FEE, REQUIRED_ACCOUNT_HOLDER, DIVIDEND_CALC_FREQUENCY, DIVIDEND_APPL_FREQUENCY, UNCLAIMED_DIVIDEND_PERIOD, STATUS, STATUS_BY, STATUS_DT, 
        BRANCH_ID, AUTHORIZE_STATUS, AUTHORIZE_BY, AUTHORIZE_DT, LOCKUP_REFUND, LOCKUP_ADDITIONAL_SHARE, ALLOWED_NOMINEE, LAST_DIVIDEND_CALC, NEXT_DUE_DATE, 
        PERCENTAGE_DIVIDEND, NOMINAL_MEM_PERIOD, SHARE_SUSPENSE_ACHD, DIVIDEND_PAYMENT_ACHD, SHARE_ACHD, MEMBERSHIP_FEE_ACHD, APPLICATION_FEE_ACHD, 
        SHARE_FEE_ACHD,DIVIDEND_PAYABLE_ACHD,DIV_RUN_DATE,LAST_UNCLAIMED_TRANSFERUPTO,UNCLAIMED_RUN_DATE,UNCLAIMED_DIVIDEND_TRF_ACHD,ADMISSION_FEE_MIN,
        ADMISSION_FEE_MAX,ADMISSION_FEE_TYPE,MIN_DIVIDEND_AMOUNT,DIVIDEND_CALC_TYPE,DIVIDEND_ROUND_OFF,RATIFICATION_REQUIRED,INCOME_ACCOUNT_HEAD,
        UNCLAIMED_DIVIDEND_PERIOD_TYPE,MIN_INTIAL_SHARES,NUM_PATTERN_PREFIX,NUM_PATTERN_SUFFIX, CONSIDER_RECOVERY_SALARY,SUBSIDY_FOR_SCST,CUSTOMERS_SHARE,GOVTS_SHARE,GOVT_SUBSIDY_ACHD, IS_OUTSTANDING_REQUIRED
        ,MANDATORY_DATA,MANDATORY_ADDR_DATA,PENSION_SCHEME_AGE,PENSION_SCHEME_DURATION,MIN_PENSION,PENSION_PROD_TYPE,PENSION_PROD_ID,PENSION_AC_HD,SHARE_CERTIFICATE_PRINT,FULLCLOSURE_REQUIRED,DRF_ALLOWED) VALUES (
		<!--#shareType:VARCHAR#, #faceValue:NUMERIC#, #issuedCapital:NUMERIC#, #subscribedCapital:NUMERIC#, #paidupCapital:NUMERIC#, #withdrawalRestriction:NUMERIC#, 
                #maximumShare:NUMERIC#, #admissionFee:NUMERIC#, #applicationFee:NUMERIC#, #shareFee:NUMERIC#, #requiredAccountHolder:VARCHAR#, 
                #cboDivCalcFrequencyNew:VARCHAR#, #dividendApplFrequency:VARCHAR#, #unclaimedDividendPeriod:NUMERIC#, #status:VARCHAR#, #statusBy:VARCHAR#, 
                #statusDt:DATE#, #branchId:VARCHAR#, #authorizeStatus:VARCHAR#, #authorizeBy:VARCHAR#, #authorizeDt:DATE#, #lockupRefund:NUMERIC#, 
                #lockupAdditionalShare:NUMERIC#, #allowedNominee:NUMERIC#, #lastDividendCalc:DATE#, #nextDueDate:DATE#, #percentageDividend:NUMERIC#, 
                #nominalMemPeriod:NUMERIC#, #shareSuspenseAchd:VARCHAR#, #txtDivPaidAcct:VARCHAR#, #shareAchd:VARCHAR#, #membershipFeeAchd:VARCHAR#, 
                #applicationFeeAchd:VARCHAR#, #shareFeeAchd:VARCHAR#,#txtDivPayableAcct:VARCHAR#, #txtMinDividendAmount:VARCHAR#,#cboDivCalcType:VARCHAR#,
                #cboDividendRounding:VARCHAR# ,#lstRunDate:DATE#,#unclaimedRunDate:DATE#,#unclaimedTransferDate:DATE#,#unClaimedDivTransferAcHd:VARCHAR#,
                #txtAdmissionFeeMin:NUMERIC#,#txtAdmissionFeeMax:NUMERIC#,#rdoAdmissionFeeType:VARCHAR#, #rdoRatification:VARCHAR#, #txtIncomeAccountHead:VARCHAR#, 
                #unclaimedDividendPeriodType:VARCHAR# , #minIntialShares:VARCHAR#, #numPatternPrefix:VARCHAR# , #numPatternSuffix:VARCHAR#, #considerRecovery:VARCHAR#-->
                
        #shareType:VARCHAR#, #faceValue:NUMERIC#, #issuedCapital:NUMERIC#, #subscribedCapital:NUMERIC#, #paidupCapital:NUMERIC#, #withdrawalRestriction:NUMERIC#, 
        #maximumShare:NUMERIC#, #admissionFee:NUMERIC#, #applicationFee:NUMERIC#, #shareFee:NUMERIC#, #requiredAccountHolder:VARCHAR#, 
        #cboDivCalcFrequencyNew:VARCHAR#, #dividendApplFrequency:VARCHAR#, #unclaimedDividendPeriod:NUMERIC#, #status:VARCHAR#, #statusBy:VARCHAR#, 
        #statusDt:DATE#, #branchId:VARCHAR#, #authorizeStatus:VARCHAR#, #authorizeBy:VARCHAR#, #authorizeDt:DATE#, #lockupRefund:NUMERIC#, 
        #lockupAdditionalShare:NUMERIC#, #allowedNominee:NUMERIC#, #lastDividendCalc:DATE#, #nextDueDate:DATE#, #percentageDividend:NUMERIC#, 
        #nominalMemPeriod:NUMERIC#, #shareSuspenseAchd:VARCHAR#, #txtDivPaidAcct:VARCHAR#, #shareAchd:VARCHAR#, #membershipFeeAchd:VARCHAR#, 
        #applicationFeeAchd:VARCHAR#, #shareFeeAchd:VARCHAR#,#txtDivPayableAcct:VARCHAR#,#lstRunDate:DATE#,#unclaimedRunDate:DATE#, #unclaimedTransferDate:DATE#,
        #unClaimedDivTransferAcHd:VARCHAR#,#txtAdmissionFeeMin:NUMERIC#,#txtAdmissionFeeMax:NUMERIC#,#rdoAdmissionFeeType:VARCHAR#,#txtMinDividendAmount:VARCHAR#,
        #cboDivCalcType:VARCHAR#,#cboDividendRounding:VARCHAR# , #rdoRatification:VARCHAR#, #txtIncomeAccountHead:VARCHAR#, 
        #unclaimedDividendPeriodType:VARCHAR# , #minIntialShares:VARCHAR#, #numPatternPrefix:VARCHAR# , #numPatternSuffix:VARCHAR#, #considerRecovery:VARCHAR#, 
        #chkSubsidyForSCST:VARCHAR#, #txtCustomerShare:VARCHAR#, #txtGovernmentShare:VARCHAR#, #txtGovtSubsidyAccountHead:VARCHAR#,#isOutstandingReq:VARCHAR#,#mandatoryData:VARCHAR#
        ,#mandatoryAddrData:VARCHAR#,#pensionAge:NUMERIC#,#shareRunPeriod:NUMERIC#,#minPension:NUMERIC#,#pensionDebitProdType:VARCHAR#,
        #pensionDebitProdId:VARCHAR#,#pensionDebitAccount:VARCHAR#,#shareCertificate:VARCHAR#,#rdoFullClosure:VARCHAR#,#drfAllowed:VARCHAR#)
    </mapped-statement>

	<!-- Use ShareProductTO object (JavaBean) properties as parameters for update. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="updateShareProductTO" inline-parameters="true">
        UPDATE SHARE_CONF_DETAILS SET 
        SHARE_TYPE = #shareType:VARCHAR#,
        FACE_VALUE = #faceValue:NUMERIC#,
        ISSUED_CAPITAL = #issuedCapital:NUMERIC#,
        SUBSCRIBED_CAPITAL = #subscribedCapital:NUMERIC#,
        PAIDUP_CAPITAL = #paidupCapital:NUMERIC#,
        WITHDRAWAL_RESTRICTION = #withdrawalRestriction:NUMERIC#,
        MAXIMUM_SHARE = #maximumShare:NUMERIC#,
        ADMISSION_FEE = #admissionFee:NUMERIC#,
        APPLICATION_FEE = #applicationFee:NUMERIC#,
        SHARE_FEE = #shareFee:NUMERIC#,
        REQUIRED_ACCOUNT_HOLDER = #requiredAccountHolder:VARCHAR#,
        CONSIDER_RECOVERY_SALARY = #considerRecovery:VARCHAR#,
        DIVIDEND_CALC_FREQUENCY = #cboDivCalcFrequencyNew:VARCHAR#,
        MIN_DIVIDEND_AMOUNT = #txtMinDividendAmount:VARCHAR#,
        DIVIDEND_CALC_TYPE = #cboDivCalcType:VARCHAR#,
        DIVIDEND_ROUND_OFF = #cboDividendRounding:VARCHAR#,
        DIVIDEND_APPL_FREQUENCY = #dividendApplFrequency:VARCHAR#,
        UNCLAIMED_DIVIDEND_PERIOD = #unclaimedDividendPeriod:NUMERIC#,
        UNCLAIMED_DIVIDEND_PERIOD_TYPE = #unclaimedDividendPeriodType:VARCHAR#,
        STATUS = #status:VARCHAR#,
        STATUS_BY = #statusBy:VARCHAR#,
        STATUS_DT = #statusDt:DATE#,
        AUTHORIZE_STATUS = #authorizeStatus:VARCHAR#,
        AUTHORIZE_BY = #authorizeBy:VARCHAR#,
        AUTHORIZE_DT = #authorizeDt:DATE#,
        LOCKUP_REFUND = #lockupRefund:NUMERIC#,
        LOCKUP_ADDITIONAL_SHARE = #lockupAdditionalShare:NUMERIC#,
        ALLOWED_NOMINEE = #allowedNominee:NUMERIC#,
        LAST_DIVIDEND_CALC = #lastDividendCalc:DATE#,
        NEXT_DUE_DATE = #nextDueDate:DATE#,
        PERCENTAGE_DIVIDEND = #percentageDividend:NUMERIC#,
        NOMINAL_MEM_PERIOD = #nominalMemPeriod:NUMERIC#,
        SHARE_SUSPENSE_ACHD = #shareSuspenseAchd:VARCHAR#,
        DIVIDEND_PAYMENT_ACHD = #txtDivPaidAcct:VARCHAR#,
        SHARE_ACHD = #shareAchd:VARCHAR#,
        MEMBERSHIP_FEE_ACHD = #membershipFeeAchd:VARCHAR#,
        APPLICATION_FEE_ACHD = #applicationFeeAchd:VARCHAR#,
        SHARE_FEE_ACHD = #shareFeeAchd:VARCHAR#,
        DIVIDEND_PAYABLE_ACHD=#txtDivPayableAcct:VARCHAR#,
        DIV_RUN_DATE =#lstRunDate:DATE#,
        LAST_UNCLAIMED_TRANSFERUPTO=#unclaimedRunDate:DATE#,
        UNCLAIMED_RUN_DATE=#unclaimedTransferDate:DATE#,
        ADMISSION_FEE_MIN =#txtAdmissionFeeMin:NUMERIC#,
        ADMISSION_FEE_MAX =#txtAdmissionFeeMax:NUMERIC#,
        ADMISSION_FEE_TYPE =#rdoAdmissionFeeType:VARCHAR#,
        RATIFICATION_REQUIRED = #rdoRatification:VARCHAR#,
        UNCLAIMED_DIVIDEND_TRF_ACHD =#unClaimedDivTransferAcHd:VARCHAR#,
        INCOME_ACCOUNT_HEAD =#txtIncomeAccountHead:VARCHAR#,
        MIN_INTIAL_SHARES = #minIntialShares:VARCHAR#,
        NUM_PATTERN_PREFIX=#numPatternPrefix:VARCHAR#,
        NUM_PATTERN_SUFFIX=#numPatternSuffix:VARCHAR#,
        SUBSIDY_FOR_SCST = #chkSubsidyForSCST:VARCHAR#,   
        CUSTOMERS_SHARE = #txtCustomerShare:VARCHAR#,
        GOVTS_SHARE = #txtGovernmentShare:VARCHAR#,
        GOVT_SUBSIDY_ACHD = #txtGovtSubsidyAccountHead:VARCHAR#,
        IS_OUTSTANDING_REQUIRED =#isOutstandingReq:VARCHAR#,
        MANDATORY_DATA =#mandatoryData:VARCHAR#,
        MANDATORY_ADDR_DATA=#mandatoryAddrData:VARCHAR#,
        PENSION_SCHEME_AGE=#pensionAge:NUMERIC#,
        PENSION_SCHEME_DURATION=#shareRunPeriod:NUMERIC#,
        MIN_PENSION=#minPension:NUMERIC#,
        PENSION_PROD_TYPE=#pensionDebitProdType:VARCHAR#,
        PENSION_PROD_ID =#pensionDebitProdId:VARCHAR#,
        PENSION_AC_HD=#pensionDebitAccount:VARCHAR#,
        SHARE_CERTIFICATE_PRINT=#shareCertificate:VARCHAR#,
        FULLCLOSURE_REQUIRED = #rdoFullClosure:VARCHAR#,
        DRF_ALLOWED = #drfAllowed:VARCHAR#
        WHERE SHARE_TYPE = #shareType:VARCHAR#  AND ( STATUS != 'DELETED'  OR STATUS IN('CREATED','MODIFIED')) 
    </mapped-statement>
	<!-- Use ShareProductTO object (JavaBean) properties as parameters for delete. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. --> 
    <mapped-statement name="deleteShareProductTO" inline-parameters="true">
        UPDATE SHARE_CONF_DETAILS SET 
        STATUS = #status:VARCHAR#, 
        STATUS_BY = #statusBy:VARCHAR#, 
        STATUS_DT = #statusDt:TIMESTAMP#
        WHERE SHARE_TYPE = #shareType:VARCHAR#  AND STATUS NOT IN ('DELETED')
    </mapped-statement>

	<!-- Use primitive wrapper type (e.g. Integer) as parameter and allow results to 
	     be auto-mapped results to ShareProductTO object (JavaBean) properties -->
    <result-map name="getShareProductTOResult" class="com.see.truetransact.transferobject.product.share.ShareProductTO">
        <property name="shareType" column="SHARE_TYPE"/>
        <property name="faceValue" column="FACE_VALUE"/>
        <property name="issuedCapital" column="ISSUED_CAPITAL"/>
        <property name="subscribedCapital" column="SUBSCRIBED_CAPITAL"/>
        <property name="paidupCapital" column="PAIDUP_CAPITAL"/>
        <property name="withdrawalRestriction" column="WITHDRAWAL_RESTRICTION"/>
        <property name="maximumShare" column="MAXIMUM_SHARE"/>
        <property name="admissionFee" column="ADMISSION_FEE"/>
        <property name="txtAdmissionFeeMin" column="ADMISSION_FEE_MIN"/>
        <property name="txtAdmissionFeeMax" column="ADMISSION_FEE_MAX"/>
        <property name="rdoAdmissionFeeType" column="ADMISSION_FEE_TYPE"/>
        <property name="applicationFee" column="APPLICATION_FEE"/>
        <property name="shareFee" column="SHARE_FEE"/>
        <property name="requiredAccountHolder" column="REQUIRED_ACCOUNT_HOLDER"/>
        <property name="considerRecovery" column="CONSIDER_RECOVERY_SALARY"/>
        <property name="txtMinDividendAmount" column="MIN_DIVIDEND_AMOUNT"/>
        <property name="cboDivCalcType" column="DIVIDEND_CALC_TYPE"/>
        <property name="cboDividendRounding" column="DIVIDEND_ROUND_OFF"/>
        <property name="cboDivCalcFrequencyNew" column="DIVIDEND_CALC_FREQUENCY"/>
        <property name="chkSubsidyForSCST" column="SUBSIDY_FOR_SCST"/>
        <property name="txtCustomerShare" column="CUSTOMERS_SHARE"/>
        <property name="txtGovernmentShare" column="GOVTS_SHARE"/>
        <property name="txtGovtSubsidyAccountHead" column="GOVT_SUBSIDY_ACHD"/>
        <property name="dividendApplFrequency" column="DIVIDEND_APPL_FREQUENCY"/>
        <property name="unclaimedDividendPeriod" column="UNCLAIMED_DIVIDEND_PERIOD"/>
        <property name="unclaimedDividendPeriodType" column="UNCLAIMED_DIVIDEND_PERIOD_TYPE"/>
        <property name="status" column="STATUS"/>
        <property name="statusBy" column="STATUS_BY"/>
        <property name="statusDt" column="STATUS_DT"/>
        <property name="branchId" column="BRANCH_ID"/>
        <property name="authorizeStatus" column="AUTHORIZE_STATUS"/>
        <property name="authorizeBy" column="AUTHORIZE_BY"/>
        <property name="authorizeDt" column="AUTHORIZE_DT"/>
        <property name="lockupRefund" column="LOCKUP_REFUND"/>
        <property name="lockupAdditionalShare" column="LOCKUP_ADDITIONAL_SHARE"/>
        <property name="allowedNominee" column="ALLOWED_NOMINEE"/>
        <property name="lastDividendCalc" column="LAST_DIVIDEND_CALC"/>
        <property name="nextDueDate" column="NEXT_DUE_DATE"/>
        <property name="percentageDividend" column="PERCENTAGE_DIVIDEND"/>
        <property name="nominalMemPeriod" column="NOMINAL_MEM_PERIOD"/>
        <property name="shareSuspenseAchd" column="SHARE_SUSPENSE_ACHD"/>
        <property name="txtDivPaidAcct" column="DIVIDEND_PAYMENT_ACHD"/>
        <property name="shareAchd" column="SHARE_ACHD"/>
        <property name="membershipFeeAchd" column="MEMBERSHIP_FEE_ACHD"/>
        <property name="applicationFeeAchd" column="APPLICATION_FEE_ACHD"/>
        <property name="shareFeeAchd" column="SHARE_FEE_ACHD"/>
        <property name="txtDivPayableAcct" column="DIVIDEND_PAYABLE_ACHD"/>
        <property name="lstRunDate" column="DIV_RUN_DATE"/>
        <property name="unclaimedRunDate" column="LAST_UNCLAIMED_TRANSFERUPTO"/>
        <property name="unclaimedTransferDate" column="UNCLAIMED_RUN_DATE"/>
        <property name="unClaimedDivTransferAcHd" column="UNCLAIMED_DIVIDEND_TRF_ACHD"/>
        <property name="rdoRatification" column="RATIFICATION_REQUIRED"/>
        <property name="txtIncomeAccountHead" column="INCOME_ACCOUNT_HEAD"/>
        <property name="minIntialShares" column="MIN_INTIAL_SHARES"/>  
        <property name="numPatternPrefix" column="NUM_PATTERN_PREFIX"/>  
        <property name="numPatternSuffix" column="NUM_PATTERN_SUFFIX"/>  
        <property name="isOutstandingReq" column="IS_OUTSTANDING_REQUIRED"/>
        <property name="mandatoryData" column="MANDATORY_DATA"/>
        <property name="mandatoryAddrData" column="MANDATORY_ADDR_DATA"/>
        <property name="pensionAge" column="PENSION_SCHEME_AGE"/>
        <property name="shareRunPeriod" column="PENSION_SCHEME_DURATION"/>
        <property name="minPension" column="MIN_PENSION"/>
        <property name="pensionDebitProdType" column="PENSION_PROD_TYPE"/>
        <property name="pensionDebitProdId" column="PENSION_PROD_ID"/>
        <property name="pensionDebitAccount" column="PENSION_AC_HD"/>
        <property name="shareCertificate" column="SHARE_CERTIFICATE_PRINT"/>
        <property name="rdoFullClosure" column="FULLCLOSURE_REQUIRED"/>
        <property name="drfAllowed" column="DRF_ALLOWED"/>
 </result-map>
        
    <mapped-statement name="getSelectShareProductTO" result-map="getShareProductTOResult" >
        SELECT * FROM SHARE_CONF_DETAILS 
        WHERE SHARE_TYPE = #value:VARCHAR#  AND (STATUS != 'DELETED' OR STATUS IN('CREATED', 'MODIFIED')) 
    </mapped-statement>

        <dynamic-mapped-statement name="getSelectShareProductMap" result-class="java.util.LinkedHashMap" >
        SELECT SHARE_TYPE,FACE_VALUE,SHARE_FEE FROM SHARE_CONF_DETAILS 
        WHERE (STATUS != 'DELETED' OR STATUS IN('CREATED', 'MODIFIED')) 
        <dynamic>
             <isPropertyAvailable prepend = "" property="FILTERED_LIST">
               <isEqual prepend="AND" property="FILTERED_LIST" compareValue="FILTERED_LIST_oracle.jdbc.driver.OracleDriver" >
                    ROWNUM &lt;= 100
                </isEqual>
            </isPropertyAvailable>
          <isParameterPresent>
                <isNotNull prepend="AND"      property="SHARE_TYPE">
                    UPPER(SHARE_TYPE) LIKE UPPER('%$SHARE_TYPE$%')
                </isNotNull>
            </isParameterPresent>
             <isParameterPresent>
                <isNotNull prepend="AND"      property="FACE_VALUE">
                    UPPER(FACE_VALUE) LIKE UPPER('%$FACE_VALUE$%')
                </isNotNull>
            </isParameterPresent>
              <isParameterPresent>
                <isNotNull prepend="AND"      property="SHARE_FEE">
                    UPPER(SHARE_FEE) LIKE UPPER('%$SHARE_FEE$%')
                </isNotNull>
            </isParameterPresent>
            </dynamic>
    </dynamic-mapped-statement>
        
    <dynamic-mapped-statement name="getSelectAccountHead" result-class="java.util.LinkedHashMap" >
        SELECT A.AC_HD_ID , A.AC_HD_DESC,AP.BALANCETYPE FROM AC_HD A, AC_HD_PARAM AP
        WHERE 
        (A.AC_HD_ID = AP.AC_HD_ID) AND (AP.STATUS NOT IN ('DELETED')) AND (AP.AUTHORIZE_STATUS  IN ('AUTHORIZED'))
         <dynamic>
              <isPropertyAvailable prepend = "" property="FILTERED_LIST">
               <isEqual prepend="AND" property="FILTERED_LIST" compareValue="FILTERED_LIST_oracle.jdbc.driver.OracleDriver" >
                    ROWNUM &lt;= 100
                </isEqual>
            </isPropertyAvailable>
             <isParameterPresent>
                <isNotNull prepend="AND"      property="AC_HD_ID">
                    UPPER(A.AC_HD_ID) LIKE UPPER('%$AC_HD_ID$%')
                </isNotNull>
            </isParameterPresent>
               <isParameterPresent>
                <isNotNull prepend="AND"      property="AC_HD_DESC">
                    UPPER(A.AC_HD_DESC) LIKE UPPER('%$AC_HD_DESC$%')
                </isNotNull>
            </isParameterPresent>
               <isParameterPresent>
                <isNotNull prepend="AND"      property="BALANCETYPE">
                    UPPER(AP.BALANCETYPE) LIKE UPPER('%$BALANCETYPE$%')
                </isNotNull>
            </isParameterPresent>
            </dynamic>
   </dynamic-mapped-statement>
          
 <!-- Used for Batch Process to update the Next Due Date -->
    <mapped-statement name="Dividend.updateShareProductNextDueDate" inline-parameters="true">
        UPDATE SHARE_CONF_DETAILS SET 
        NEXT_DUE_DATE = #nextDueDate:DATE#,
        DIV_RUN_DATE=NULL,
        PERCENTAGE_DIVIDEND=NULL,
        LAST_DIVIDEND_CALC = #lastDividendCalc:DATE#
        WHERE SHARE_TYPE = #shareType:VARCHAR#  AND ( STATUS != 'DELETED'  OR STATUS IN('CREATED','MODIFIED'))
    </mapped-statement>
                  
    <mapped-statement name="UnClaimedDividend.updateShareProductNextDueDate" inline-parameters="true">
        UPDATE SHARE_CONF_DETAILS SET 
        UNCLAIMED_RUN_DATE =NULL,
        LAST_UNCLAIMED_TRANSFERUPTO = #LAST_UNCLAIMED_TRANSFERUPTO#
        WHERE SHARE_TYPE = #SHARE_TYPE#  AND ( STATUS != 'DELETED'  OR STATUS IN('CREATED','MODIFIED'))
    </mapped-statement>
        <!-- =================================================================================== -->        
<!--     Authorization Queries -->
    <dynamic-mapped-statement name="getShareProductAuthorizeList" result-class="java.util.LinkedHashMap">
        SELECT SHARE_TYPE,FACE_VALUE,SHARE_FEE,AUTHORIZE_STATUS, AUTHORIZE_BY, STATUS_BY FROM SHARE_CONF_DETAILS SCD
        WHERE  (STATUS != 'DELETED' OR STATUS IS NULL)
        AND STATUS_BY != #USER_ID:VARCHAR# 
        AND cast(#HIERARCHY_ID# as numeric) &gt;= (SELECT DECODE(NVL(SAME_HIERARCHY_ALLOWED,'N'), 'Y', HIERARCHY_ID, HIERARCHY_ID + 1)
        FROM USER_MASTER UM, ROLE_MASTER RM 
        WHERE RM.ROLE_ID = UM.USER_ROLE AND UM.USER_ID = SCD.STATUS_BY)
        <dynamic>
            <isEqual prepend="AND" property="AUTHORIZESTATUS" compareValue="EXCEPTION" >
                AUTHORIZE_STATUS = 'EXCEPTION'
            </isEqual>
            <isNotEqual prepend="AND" property="AUTHORIZESTATUS" compareValue="EXCEPTION" >
                (AUTHORIZE_STATUS IS NULL OR 
                AUTHORIZE_STATUS NOT IN ('AUTHORIZED', 'REJECTED', 'EXCEPTION'))
            </isNotEqual>
        </dynamic>
        ORDER BY SHARE_TYPE     
    </dynamic-mapped-statement>

    <mapped-statement name="authorizeShareProduct" result-class="java.util.HashMap">
        UPDATE SHARE_CONF_DETAILS  SET 
        AUTHORIZE_STATUS = #STATUS:VARCHAR#,
        AUTHORIZE_BY = #USER_ID:VARCHAR#, 
        AUTHORIZE_DT = #AUTHORIZEDT:TIMESTAMP#
        WHERE SHARE_TYPE = #SHARE_TYPE:VARCHAR#  AND (STATUS != 'DELETED' OR (STATUS IN('CREATED', 'MODIFIED')))
    </mapped-statement>
        
    <mapped-statement name="ShareProductCount" result-class="java.util.HashMap">
        SELECT NVL(COUNT(*),0) AS COUNTS FROM SHARE_ACCT
        WHERE 
        ACCT_STATUS !='CLOSED'  AND SHARE_TYPE=#SHARE_TYPE:VARCHAR#
    </mapped-statement>
    
    
    <mapped-statement name="getDRFAllowedForShareType" result-class="java.util.HashMap">
        select DRF_ALLOWED FROM SHARE_CONF_DETAILS WHERE SHARE_TYPE = #SHARE_TYPE:VARCHAR#
    </mapped-statement>
    
<!-- =================================================================================== -->
</sql-map>