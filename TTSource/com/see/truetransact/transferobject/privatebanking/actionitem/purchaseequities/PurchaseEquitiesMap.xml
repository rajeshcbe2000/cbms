<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sql-map PUBLIC "-//iBATIS.com//DTD SQL Map 1.0//EN" "http://www.ibatis.com/dtd/sql-map.dtd">
<sql-map name="PurchaseEquitiesTOMap">

	<!-- Use PurchaseEquitiesTO object (JavaBean) properties as parameters for insert. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="insertPurchaseEquitiesTO" inline-parameters="true">
        INSERT INTO PVT_PURCHASE_EQUITY
        (PURCHASE_ID, MEMBER_ID, ENTITLE_GRP, PORTFOLIO_LOC, PF_ASSET_SUB_CLASS, PF_ACCT, SET_ASSET_SUB_CLASS, SET_ACCT, EXEC_DT, SETTLEMENT_DT, EDTS_ELIGIBLE, SMI_INFO, ORDER_TYPE, ORDER_SUB_TYPE, PHONE_ORDER, CURRENCY, DEALER_NAME, LOT_SIZE, UNITS, PRICE, COMM_TYPE, COMMISSION, COMM_CURRENCY, GOOD_TILL_DT, PROCESS_EDTS, EXCHANGE, LODGEMENT_FEE, LODGEMENT_CURRENCY, COMM_RATE, APPROX_AMOUNT, MIN_COMM_AMOUNT, MIN_COMM_CURRENCY, BANK_INST, CREDIT_NOTES, TRADER_INST, CLIENT_ADVICES, CREATED_BY, CREATED_DT, STATUS
        ) VALUES (
        #purchaseId:VARCHAR#, #memberId:VARCHAR#, #entitleGrp:VARCHAR#, #portfolioLoc:VARCHAR#, #pfAssetSubClass:VARCHAR#, #pfAcct:VARCHAR#, #setAssetSubClass:VARCHAR#, #setAcct:VARCHAR#, #execDt:DATE#, #settlementDt:DATE#, #edtsEligible:VARCHAR#, #smiInfo:VARCHAR#, #orderType:VARCHAR#, #orderSubType:VARCHAR#, #phoneOrder:VARCHAR#, #currency:VARCHAR#, #dealerName:VARCHAR#, #lotSize:NUMERIC#, #units:NUMERIC#, #price:NUMERIC#, #commType:VARCHAR#, #commission:NUMERIC#, #commCurrency:VARCHAR#, #goodTillDt:DATE#, #processEdts:VARCHAR#, #exchange:VARCHAR#, #lodgementFee:NUMERIC#, #lodgementCurrency:VARCHAR#, #commRate:NUMERIC#, #approxAmount:NUMERIC#, #minCommAmount:NUMERIC#, #minCommCurrency:VARCHAR#, #bankInst:VARCHAR#, #creditNotes:VARCHAR#, #traderInst:VARCHAR#, #clientAdvices:VARCHAR#, #createdBy:VARCHAR#, TODAY_DT, #status:VARCHAR#)
    </mapped-statement>

	<!-- Use PurchaseEquitiesTO object (JavaBean) properties as parameters for update. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="updatePurchaseEquitiesTO" inline-parameters="true">
        UPDATE PVT_PURCHASE_EQUITY 
        SET 
        MEMBER_ID = #memberId:VARCHAR#,
        ENTITLE_GRP = #entitleGrp:VARCHAR#,
        PORTFOLIO_LOC = #portfolioLoc:VARCHAR#,
        PF_ASSET_SUB_CLASS = #pfAssetSubClass:VARCHAR#,
        PF_ACCT = #pfAcct:VARCHAR#,
        SET_ASSET_SUB_CLASS = #setAssetSubClass:VARCHAR#,
        SET_ACCT = #setAcct:VARCHAR#,
        EXEC_DT = #execDt:DATE#,
        SETTLEMENT_DT = #settlementDt:DATE#,
        EDTS_ELIGIBLE = #edtsEligible:VARCHAR#,
        SMI_INFO = #smiInfo:VARCHAR#,
        ORDER_TYPE = #orderType:VARCHAR#,
        ORDER_SUB_TYPE = #orderSubType:VARCHAR#,
        PHONE_ORDER = #phoneOrder:VARCHAR#,
        CURRENCY = #currency:VARCHAR#,
        DEALER_NAME = #dealerName:VARCHAR#,
        LOT_SIZE = #lotSize:NUMERIC#,
        UNITS = #units:NUMERIC#,
        PRICE = #price:NUMERIC#,
        COMM_TYPE = #commType:VARCHAR#,
        COMMISSION = #commission:NUMERIC#,
        COMM_CURRENCY = #commCurrency:VARCHAR#,
        GOOD_TILL_DT = #goodTillDt:DATE#,
        PROCESS_EDTS = #processEdts:VARCHAR#,
        EXCHANGE = #exchange:VARCHAR#,
        LODGEMENT_FEE = #lodgementFee:NUMERIC#,
        LODGEMENT_CURRENCY = #lodgementCurrency:VARCHAR#,
        COMM_RATE = #commRate:NUMERIC#,
        APPROX_AMOUNT = #approxAmount:NUMERIC#,
        MIN_COMM_AMOUNT = #minCommAmount:NUMERIC#,
        MIN_COMM_CURRENCY = #minCommCurrency:VARCHAR#,
        BANK_INST = #bankInst:VARCHAR#,
        CREDIT_NOTES = #creditNotes:VARCHAR#,
        CLIENT_ADVICES = #clientAdvices:VARCHAR#,
        TRADER_INST = #traderInst:VARCHAR#,
        STATUS_BY = #statusBy:VARCHAR#,
        STATUS_DT = TODAY_DT
        WHERE PURCHASE_ID = #purchaseId:VARCHAR#
    </mapped-statement>

	<!-- Use PurchaseEquitiesTO object (JavaBean) properties as parameters for delete. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. --> 
    <mapped-statement name="deletePurchaseEquitiesTO" inline-parameters="true">
        UPDATE PVT_PURCHASE_EQUITY SET 
        STATUS = 'DELETED', 
        STATUS_BY = #statusBy:VARCHAR#, 
        STATUS_DT = TODAY_DT 
        WHERE PURCHASE_ID = #purchaseId:VARCHAR#
    </mapped-statement>

	<!-- Use primitive wrapper type (e.g. Integer) as parameter and allow results to 
	     be auto-mapped results to PurchaseEquitiesTO object (JavaBean) properties -->
    <result-map name="getPurchaseEquitiesTOResult" class="com.see.truetransact.transferobject.privatebanking.actionitem.purchaseequities.PurchaseEquitiesTO">
        <property name="purchaseId" column="PURCHASE_ID"/>
        <property name="memberId" column="MEMBER_ID"/>
        <property name="entitleGrp" column="ENTITLE_GRP"/>
        <property name="portfolioLoc" column="PORTFOLIO_LOC"/>
        <property name="pfAssetSubClass" column="PF_ASSET_SUB_CLASS"/>
        <property name="pfAcct" column="PF_ACCT"/>
        <property name="setAssetSubClass" column="SET_ASSET_SUB_CLASS"/>
        <property name="setAcct" column="SET_ACCT"/>
        <property name="execDt" column="EXEC_DT"/>
        <property name="settlementDt" column="SETTLEMENT_DT"/>
        <property name="edtsEligible" column="EDTS_ELIGIBLE"/>
        <property name="smiInfo" column="SMI_INFO"/>
        <property name="orderType" column="ORDER_TYPE"/>
        <property name="orderSubType" column="ORDER_SUB_TYPE"/>
        <property name="phoneOrder" column="PHONE_ORDER"/>
        <property name="currency" column="CURRENCY"/>
        <property name="dealerName" column="DEALER_NAME"/>
        <property name="lotSize" column="LOT_SIZE"/>
        <property name="units" column="UNITS"/>
        <property name="price" column="PRICE"/>
        <property name="commType" column="COMM_TYPE"/>
        <property name="commission" column="COMMISSION"/>
        <property name="commCurrency" column="COMM_CURRENCY"/>
        <property name="goodTillDt" column="GOOD_TILL_DT"/>
        <property name="processEdts" column="PROCESS_EDTS"/>
        <property name="exchange" column="EXCHANGE"/>
        <property name="lodgementFee" column="LODGEMENT_FEE"/>
        <property name="lodgementCurrency" column="LODGEMENT_CURRENCY"/>
        <property name="commRate" column="COMM_RATE"/>
        <property name="approxAmount" column="APPROX_AMOUNT"/>
        <property name="minCommAmount" column="MIN_COMM_AMOUNT"/>
        <property name="minCommCurrency" column="MIN_COMM_CURRENCY"/>
        <property name="bankInst" column="BANK_INST"/>
        <property name="creditNotes" column="CREDIT_NOTES"/>
        <property name="traderInst" column="TRADER_INST"/>
        <property name="clientAdvices" column="CLIENT_ADVICES"/>
    </result-map>
    <mapped-statement name="getSelectPurchaseEquitiesTO" result-map="getPurchaseEquitiesTOResult" >
        SELECT * FROM PVT_PURCHASE_EQUITY 
        WHERE PURCHASE_ID = #value:VARCHAR#
    </mapped-statement>
    <mapped-statement name="getSelectPvtAIPurchaseEquity" result-class="java.util.LinkedHashMap" >
        SELECT PVT.PURCHASE_ID, POM.MEMBER, PVT.ENTITLE_GRP FROM PVT_PURCHASE_EQUITY PVT, PVT_ORDER_MASTER POM  
        WHERE PVT.STATUS != 'DELETED' AND PVT.MEMBER_ID = POM.ORD_ID
    </mapped-statement>
        
            <!-- =================================================================================== -->        
<!--     Authorization Queries -->
    <mapped-statement name="getPurchaseEquityAuthorizeList" result-class="java.util.LinkedHashMap">
        SELECT PEQ.PURCHASE_ID, POM.MEMBER, PEQ.ENTITLE_GRP FROM PVT_PURCHASE_EQUITY PEQ, PVT_ORDER_MASTER POM  
        WHERE PEQ.MEMBER_ID = POM.ORD_ID AND (PEQ.STATUS != 'DELETED' OR PEQ.STATUS IS NULL)
        AND (PEQ.AUTHORIZE_STATUS NOT IN 
        ('AUTHORIZED', 'REJECTED') OR PEQ.AUTHORIZE_STATUS IS NULL) 
    </mapped-statement>

    <mapped-statement name="authorizePurchaseEquity" result-class="java.util.HashMap">
        UPDATE PVT_PURCHASE_EQUITY
        SET 
        AUTHORIZE_STATUS = #STATUS:VARCHAR#,
        AUTHORIZED_BY = #USER_ID:VARCHAR#, 
        AUTHORIZED_DT = TODAY_DT
        WHERE PURCHASE_ID = #PURCHASE_ID:VARCHAR# 
    </mapped-statement>
<!-- =================================================================================== -->

</sql-map>