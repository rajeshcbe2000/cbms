<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sql-map PUBLIC "-//iBATIS.com//DTD SQL Map 1.0//EN" "http://www.ibatis.com/dtd/sql-map.dtd">
<sql-map name="NewTimeDepositTOMap">

	<!-- Use NewTimeDepositTO object (JavaBean) properties as parameters for insert. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="insertNewTimeDepositTO" inline-parameters="true">
        INSERT INTO PVT_TIME_DEPOSIT
        (REF_ID, MEMBER_ID, SAFE_ENTITLE_GRP, PORTFOLIO_LOC, SAFE_ASSET_SUBCLASS, SAFE_ACCT, INT_ASSET_SUBCLASS1, INT_ASSET_SUBCLASS2, INT_ACCT1, INT_ACCT2, PRIN_ASSET_SUBCLASS, PRIN_ACCT, EXEC_DT, START_DT, AMT, SPREAD, PROD_TYPE, SETTLEMENT_TYPE, TENOR1, TENOR2, MATURITY_DT, AUTOROLL, PHONE_ORDER, CLIENT_RATE, BANK_INSTRUCT, TRADER_INSTRUCT, CREDIT_NOTES, CLIENT_ADVICES, STATUS
        ) VALUES (
        #refId:VARCHAR#, #memberId:VARCHAR#, #safeEntitleGrp:VARCHAR#, #portfolioLoc:VARCHAR#, #safeAssetSubclass:VARCHAR#, #safeAcct:VARCHAR#, #intAssetSubclass1:VARCHAR#, #intAssetSubclass2:VARCHAR#, #intAcct1:VARCHAR#, #intAcct2:VARCHAR#, #prinAssetSubclass:VARCHAR#, #prinAcct:VARCHAR#, #execDt:DATE#, #startDt:DATE#, #amt:NUMERIC#, #spread:NUMERIC#, #prodType:VARCHAR#, #settlementType:VARCHAR#, #tenor1:VARCHAR#, #tenor2:VARCHAR#, #maturityDt:DATE#, #autoroll:VARCHAR#, #phoneOrder:VARCHAR#, #clientRate#, #bankInstruct:VARCHAR#, #traderInstruct:VARCHAR#, #creditNotes:VARCHAR#, #clientAdvices:VARCHAR#, #status:VARCHAR#)
    </mapped-statement>

	<!-- Use NewTimeDepositTO object (JavaBean) properties as parameters for update. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="updateNewTimeDepositTO" inline-parameters="true">
        UPDATE PVT_TIME_DEPOSIT SET 
        MEMBER_ID = #memberId:VARCHAR#,
        SAFE_ENTITLE_GRP = #safeEntitleGrp:VARCHAR#,
        PORTFOLIO_LOC = #portfolioLoc:VARCHAR#,
        SAFE_ASSET_SUBCLASS = #safeAssetSubclass:VARCHAR#,
        SAFE_ACCT = #safeAcct:VARCHAR#,
        INT_ASSET_SUBCLASS1 = #intAssetSubclass1:VARCHAR#,
        INT_ASSET_SUBCLASS2 = #intAssetSubclass2:VARCHAR#,
        INT_ACCT1 = #intAcct1:VARCHAR#,
        INT_ACCT2 = #intAcct2:VARCHAR#,
        PRIN_ASSET_SUBCLASS = #prinAssetSubclass:VARCHAR#,
        PRIN_ACCT = #prinAcct:VARCHAR#,
        EXEC_DT = #execDt:DATE#,
        START_DT = #startDt:DATE#,
        AMT = #amt:NUMERIC#,
        SPREAD = #spread:NUMERIC#,
        PROD_TYPE = #prodType:VARCHAR#,
        SETTLEMENT_TYPE = #settlementType:VARCHAR#,
        TENOR1 = #tenor1:VARCHAR#,
        TENOR2 = #tenor2:VARCHAR#,
        MATURITY_DT = #maturityDt:DATE#,
        AUTOROLL = #autoroll:VARCHAR#,
        PHONE_ORDER = #phoneOrder:VARCHAR#,
        CLIENT_RATE = #clientRate#,
        BANK_INSTRUCT = #bankInstruct:VARCHAR#,
        TRADER_INSTRUCT = #traderInstruct:VARCHAR#,
        CREDIT_NOTES = #creditNotes:VARCHAR#,
        CLIENT_ADVICES = #clientAdvices:VARCHAR#,
        STATUS_BY = #statusBy:VARCHAR#,
        STATUS_DT = TODAY_DT
        WHERE REF_ID = #refId:VARCHAR#
    </mapped-statement>

	<!-- Use NewTimeDepositTO object (JavaBean) properties as parameters for delete. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. --> 
    <mapped-statement name="deleteNewTimeDepositTO" inline-parameters="true">
        UPDATE PVT_TIME_DEPOSIT SET 
        STATUS = 'DELETED',
        STATUS_BY = #statusBy:VARCHAR#, 
        STATUS_DT = TODAY_DT 
        WHERE REF_ID = #refId:VARCHAR#
    </mapped-statement>

	<!-- Use primitive wrapper type (e.g. Integer) as parameter and allow results to 
	     be auto-mapped results to NewTimeDepositTO object (JavaBean) properties -->
    <result-map name="getNewTimeDepositTOResult" class="com.see.truetransact.transferobject.privatebanking.actionitem.newtimedeposit.NewTimeDepositTO">
        <property name="refId" column="REF_ID"/>
        <property name="memberId" column="MEMBER_ID"/>
        <property name="safeEntitleGrp" column="SAFE_ENTITLE_GRP"/>
        <property name="portfolioLoc" column="PORTFOLIO_LOC"/>
        <property name="safeAssetSubclass" column="SAFE_ASSET_SUBCLASS"/>
        <property name="safeAcct" column="SAFE_ACCT"/>
        <property name="intAssetSubclass1" column="INT_ASSET_SUBCLASS1"/>
        <property name="intAssetSubclass2" column="INT_ASSET_SUBCLASS2"/>
        <property name="intAcct1" column="INT_ACCT1"/>
        <property name="intAcct2" column="INT_ACCT2"/>
        <property name="prinAssetSubclass" column="PRIN_ASSET_SUBCLASS"/>
        <property name="prinAcct" column="PRIN_ACCT"/>
        <property name="execDt" column="EXEC_DT"/>
        <property name="startDt" column="START_DT"/>
        <property name="amt" column="AMT"/>
        <property name="spread" column="SPREAD"/>
        <property name="prodType" column="PROD_TYPE"/>
        <property name="settlementType" column="SETTLEMENT_TYPE"/>
        <property name="tenor1" column="TENOR1"/>
        <property name="tenor2" column="TENOR2"/>
        <property name="maturityDt" column="MATURITY_DT"/>
        <property name="autoroll" column="AUTOROLL"/>
        <property name="phoneOrder" column="PHONE_ORDER"/>
        <property name="clientRate" column="CLIENT_RATE"/>
        <property name="bankInstruct" column="BANK_INSTRUCT"/>
        <property name="traderInstruct" column="TRADER_INSTRUCT"/>
        <property name="creditNotes" column="CREDIT_NOTES"/>
        <property name="clientAdvices" column="CLIENT_ADVICES"/>
        <property name="status" column="STATUS"/>
        <property name="statusBy" column="STATUS_BY"/>
        <property name="statusDt" column="STATUS_DT"/>
        <property name="authorizeStatus" column="AUTHORIZE_STATUS"/>
        <property name="authorizeUser" column="AUTHORIZE_USER"/>
        <property name="authorizeDt" column="AUTHORIZE_DT"/>
    </result-map>
    <mapped-statement name="getSelectNewTimeDepositTO" result-map="getNewTimeDepositTOResult" >
        SELECT * FROM PVT_TIME_DEPOSIT 
        WHERE REF_ID = #value:VARCHAR#
    </mapped-statement>
        
    <mapped-statement name="getSelectPvtTimeDeposit" result-class="java.util.LinkedHashMap" >
        SELECT PVT.REF_ID, POM.MEMBER, PVT.SAFE_ENTITLE_GRP FROM PVT_TIME_DEPOSIT PVT, PVT_ORDER_MASTER POM  
        WHERE PVT.STATUS != 'DELETED' AND PVT.MEMBER_ID = POM.ORD_ID
    </mapped-statement>
        
               <!-- =================================================================================== -->        
<!--     Authorization Queries -->
    <mapped-statement name="getNewTimeDepositAuthorizeList" result-class="java.util.LinkedHashMap">
        SELECT PVT.REF_ID, POM.MEMBER, PVT.SAFE_ENTITLE_GRP FROM PVT_TIME_DEPOSIT PVT, PVT_ORDER_MASTER POM  
        WHERE PVT.MEMBER_ID = POM.ORD_ID AND (PVT.STATUS != 'DELETED' OR PVT.STATUS IS NULL)
        AND (PVT.AUTHORIZE_STATUS NOT IN 
        ('AUTHORIZED', 'REJECTED') OR PVT.AUTHORIZE_STATUS IS NULL) 
    </mapped-statement>

    <mapped-statement name="authorizeNewTimeDeposit" result-class="java.util.HashMap">
        UPDATE PVT_TIME_DEPOSIT
        SET 
        AUTHORIZE_STATUS = #STATUS:VARCHAR#,
        AUTHORIZE_USER = #USER_ID:VARCHAR#, 
        AUTHORIZE_DT = TODAY_DT
        WHERE REF_ID = #REF_ID:VARCHAR# 
    </mapped-statement>
<!-- =================================================================================== -->

</sql-map>