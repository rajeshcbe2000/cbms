<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sql-map PUBLIC "-//iBATIS.com//DTD SQL Map 1.0//EN" "http://www.ibatis.com/dtd/sql-map.dtd">
<sql-map name="EmployeePresentDetailsMap">

<!-- Use CustomerPhoneTO object (JavaBean) properties as parameters for insert. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="insertEmployeePresentDetailsTO" inline-parameters="true">
		
        INSERT INTO employee_present_details (
        SYS_ID,GRADUATION_INCREMENT_YES_NO,GRADUATION_RELEASED_DATE,CAIIBPART1_YES_NO,CAIIBPART1_RELEASED_DATE,
        CAIIBPART2_YES_NO,CAIIBPART2_RELEASED_DATE,ANYOTHER_YES_NO,ANYOTHER_RELEASED_DATE,ANYOTHER_INSTITUTIONNAME,
        PRESENT_BASIC,LAST_INCREMENT_DATE,LOSS_PAY_IN_DAYS,LOSS_PAY_IN_MONTHS,NEXT_INCREMENT_DATE,
        SIGNATURE_YES_NO,SIGNATURE_NUMBER,UNION_MEMBER,SOCIETY_MEMBER,SOCIETY_MEMBER_NO,CLUB_YESNO,CLUB_NAME,PROBATION_PERIOD,PROBATION_PERIOD_FREQ,
        CONFIRMATION_DATE,PRESENT_BRANCH_CODE,REGINAL_CODE,ZONAL_CODE,WORKING_SINCE_DATE,PRESENT_DISGNATION,PRESENT_GRADE,STATUS,STATUS_BY,STATUS_DT
        )
        VALUES(#sysId:VARCHAR#,#rdoGradutionIncrementYesNo:VARCHAR#,#tdtGradutionIncrementReleasedDate:DATE#,#rdoCAIIBPART1IncrementYesNo:VARCHAR#,#tdtCAIIBPART1IncrementReleasedDate:DATE#,
        #rdoCAIIBPART2IncrementYesNo:VARCHAR#,#tdtCAIIBPART2IncrementReleasedDate:DATE#,#rdoAnyOtherIncrementYesNo:VARCHAR#,#tdtAnyOtherIncrementReleasedDate:DATE# ,#txtAnyOtherIncrementInstitutionName:VARCHAR#
        ,#txtPresentBasic:NUMERIC#,#tdtLastIncrmentDate:DATE#,#txtLossOfpay_Days:VARCHAR# ,#txtLossPay_Months:VARCHAR# ,#tdtNextIncrmentDate:DATE#,
        #rdoSigNoYesNo:VARCHAR#,#txtSignatureNo:VARCHAR#,#cboUnionMember:VARCHAR#,#cboSocietyMember:VARCHAR#,#societyMemberNo:VARCHAR#, #clubMembership:VARCHAR#,#clubName:VARCHAR#,#txtProbationPeriod:VARCHAR#,#cboProbationPeriod:VARCHAR#,
        #tdtConfirmationDate:DATE#,#cboPresentBranchId:VARCHAR#,#cboReginoalOffice:VARCHAR#,#cboZonalOffice:VARCHAR#,#tdtWorkingSince:DATE#,
        #cboDesignation:VARCHAR#,#cboPresentGrade:VARCHAR#,#status:VARCHAR#,#statusBy:VARCHAR#,#statusDt:DATE#)

    </mapped-statement>

	<!-- Use CustomerPhoneTO object (JavaBean) properties as parameters for delete. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. --> 
    <mapped-statement name="updateEmployeePresentDetailsTO" inline-parameters="true">
        UPDATE employee_present_details SET  
        GRADUATION_INCREMENT_YES_NO= #rdoGradutionIncrementYesNo:VARCHAR#,
        GRADUATION_RELEASED_DATE=#tdtGradutionIncrementReleasedDate:DATE#,
        CAIIBPART1_YES_NO=#rdoCAIIBPART1IncrementYesNo:VARCHAR#,
        CAIIBPART1_RELEASED_DATE=#tdtCAIIBPART1IncrementReleasedDate:DATE#,
        CAIIBPART2_YES_NO=#rdoCAIIBPART2IncrementYesNo:VARCHAR#,
        CAIIBPART2_RELEASED_DATE=#tdtCAIIBPART2IncrementReleasedDate:DATE#,
        ANYOTHER_YES_NO=#rdoAnyOtherIncrementYesNo:VARCHAR#,
        ANYOTHER_RELEASED_DATE=#tdtAnyOtherIncrementReleasedDate:DATE#,
        ANYOTHER_INSTITUTIONNAME=#txtAnyOtherIncrementInstitutionName:VARCHAR#,
        PRESENT_BASIC=#txtPresentBasic:NUMERIC#,
        LAST_INCREMENT_DATE=#tdtLastIncrmentDate:DATE#,
        LOSS_PAY_IN_DAYS=#txtLossOfpay_Days:VARCHAR#,
        LOSS_PAY_IN_MONTHS=#txtLossPay_Months:VARCHAR#,
        NEXT_INCREMENT_DATE=#tdtNextIncrmentDate:DATE#,
        SIGNATURE_YES_NO=#rdoSigNoYesNo:VARCHAR#,
        SIGNATURE_NUMBER=#txtSignatureNo:VARCHAR#,
        UNION_MEMBER=#cboUnionMember:VARCHAR#,
        SOCIETY_MEMBER=#cboSocietyMember:VARCHAR#,
        SOCIETY_MEMBER_NO=#societyMemberNo:VARCHAR#,
        CLUB_YESNO=#clubMembership:VARCHAR#,
        CLUB_NAME=#clubName:VARCHAR#,
        PROBATION_PERIOD=#txtProbationPeriod:VARCHAR#,
        PROBATION_PERIOD_FREQ=#cboProbationPeriod:VARCHAR#,
        CONFIRMATION_DATE=#tdtConfirmationDate:DATE#,
        PRESENT_BRANCH_CODE=#cboPresentBranchId:VARCHAR#,
        REGINAL_CODE=#cboReginoalOffice:VARCHAR#,
        ZONAL_CODE=#cboZonalOffice:VARCHAR#,
        WORKING_SINCE_DATE=#tdtWorkingSince:DATE#,
        PRESENT_DISGNATION=#cboDesignation:VARCHAR#,
        PRESENT_GRADE=#cboPresentGrade:VARCHAR#,
        STATUS=#status:VARCHAR#,
        STATUS_BY=#statusBy:VARCHAR#,
        STATUS_DT=#statusDt:DATE#
        WHERE  SYS_ID = #sysId#  AND  STATUS NOT IN ('DELETED')
    </mapped-statement>
    <mapped-statement name="deleteEmployeePresentDetailsTO" inline-parameters="true">
        UPDATE employee_present_details SET 
        STATUS = #status:VARCHAR#,
        STATUS_BY = #statusBy:VARCHAR#,
        STATUS_DT = #statusDt:TIMESTAMP#
        WHERE SYS_ID = #sysId:VARCHAR# 
    </mapped-statement>
        
	<!-- Use primitive wrapper type (e.g. Integer) as parameter and allow results to 
	     be auto-mapped results to CustomerPhoneTO object (JavaBean) properties -->
    <result-map name="getEmployeePresentDetailsTOResult" class="com.see.truetransact.transferobject.employee.EmployeePresentDetailsTO">
        <property name="sysId" column="SYS_ID"/>		
        <property name="rdoGradutionIncrementYesNo" column="GRADUATION_INCREMENT_YES_NO"/>	
        <property name="tdtGradutionIncrementReleasedDate" column="GRADUATION_RELEASED_DATE"/>	
        <property name="rdoCAIIBPART1IncrementYesNo" column="CAIIBPART1_YES_NO"/>	
        <property name="tdtCAIIBPART1IncrementReleasedDate" column="CAIIBPART1_RELEASED_DATE"/>	
        <property name="rdoCAIIBPART2IncrementYesNo" column="CAIIBPART2_YES_NO"/>	
        <property name="tdtCAIIBPART2IncrementReleasedDate" column="CAIIBPART2_RELEASED_DATE"/>	
        <property name="rdoAnyOtherIncrementYesNo" column="ANYOTHER_YES_NO"/>	
        <property name="txtAnyOtherIncrementInstitutionName" column="ANYOTHER_INSTITUTIONNAME"/>
        <property name="tdtAnyOtherIncrementReleasedDate" column="ANYOTHER_RELEASED_DATE"/>	
        <property name="txtPresentBasic" column="PRESENT_BASIC"/>
        <property name="tdtLastIncrmentDate" column="LAST_INCREMENT_DATE"/>	
        <property name="txtLossOfpay_Days" column="LOSS_PAY_IN_DAYS"/>	
        <property name="txtLossPay_Months" column="LOSS_PAY_IN_MONTHS"/>	
        <property name="tdtNextIncrmentDate" column="NEXT_INCREMENT_DATE"/>	
        <property name="rdoSigNoYesNo" column="SIGNATURE_YES_NO"/>
        <property name="txtSignatureNo" column="SIGNATURE_NUMBER"/>
        <property name="cboUnionMember" column="UNION_MEMBER"/>	
        <property name="cboSocietyMember" column="SOCIETY_MEMBER"/>
        <property name="societyMemberNo" column="SOCIETY_MEMBER_NO"/>	
        <property name="clubMembership" column="CLUB_YESNO"/>	
        <property name="clubName" column="CLUB_NAME"/>	
        <property name="txtProbationPeriod" column="PROBATION_PERIOD"/>	
        <property name="cboProbationPeriod" column="PROBATION_PERIOD_FREQ"/>	
        <property name="tdtConfirmationDate" column="CONFIRMATION_DATE"/>
        <property name="cboPresentBranchId" column="PRESENT_BRANCH_CODE"/>
        <property name="cboReginoalOffice" column="REGINAL_CODE"/>
        <property name="cboZonalOffice" column="ZONAL_CODE"/>
        <property name="tdtWorkingSince" column="WORKING_SINCE_DATE"/>
        <property name="cboDesignation" column="PRESENT_DISGNATION"/>
        <property name="cboPresentGrade" column="PRESENT_GRADE"/>
        <property name="status" column="STATUS" />
        <property name="statusBy" column="STATUS_BY"/>
        <property name="statusDt" column="STATUS_DT"/>
               
                
                
    </result-map>
    <dynamic-mapped-statement name="getSelectEmployeePresentDetailsTO" result-map="getEmployeePresentDetailsTOResult" >
        SELECT *
        FROM  employee_present_details  erw
        WHERE  SYS_ID=#SYS_EMPID:VARCHAR#  
                  <!--SELECT SYS_ID,GRADUATION_INCREMENT_YES_NO,GRADUATION_RELEASED_DATE,CAIIBPART1_YES_NO,            
                  CAIIBPART1_RELEASED_DATE,CAIIBPART2_YES_NO,CAIIBPART2_RELEASED_DATE,ANYOTHER_YES_NO,              
                  ANYOTHER_RELEASED_DATE,ANYOTHER_INSTITUTIONNAME,LAST_INCREMENT_DATE,          
                  LOSS_PAY_IN_DAYS,LOSS_PAY_IN_MONTHS,NEXT_INCREMENT_DATE,SIGNATURE_YES_NO,SIGNATURE_NUMBER,UNION_MEMBER,                 
                  SOCIETY_MEMBER,SOCIETY_MEMBER_NO,CLUB_YESNO,CLUB_NAME,PROBATION_PERIOD,PROBATION_PERIOD_FREQ,        
                  CONFIRMATION_DATE,PRESENT_BRANCH_CODE,REGINAL_CODE,ZONAL_CODE,WORKING_SINCE_DATE,PRESENT_DISGNATION,PRESENT_GRADE,                
                  STATUS,STATUS_BY,STATUS_DT,NO_OF_INCREMENTS,ERW.PRESENT_BASIC   
                    FROM  EMPLOYEE_PRESENT_DETAILS  ERW,EMPLOYEE_BASIC EB
                    WHERE  SYS_ID=#SYS_EMPID#
                    and ERW.SYS_ID = EB.EMPLOYEE_ID and
                    EB.EB_ID IN (SELECT MAX(EB_ID) FROM EMPLOYEE_BASIC WHERE EMPLOYEE_ID = #SYS_EMPID# AND EFFECTIVE_DATE &lt;= #CURRENT_DT# )
                        -->
        <dynamic>
            <isNotPropertyAvailable prepend = "AND" property="DELETECHECK">
                (ERW.STATUS NOT IN ('DELETED')
            </isNotPropertyAvailable>
            <isPropertyAvailable prepend = "AND" property="DELETECHECK">
                ( ERW.STATUS IN 'DELETED'
            </isPropertyAvailable>
            <isPropertyAvailable prepend = "OR" property="AUTHORIZECHECK">
                ERW.STATUS IN 'DELETED'
            </isPropertyAvailable>
            )
        </dynamic>
                
    </dynamic-mapped-statement>
    <mapped-statement name="getDesignationFromGrade"  result-class="java.util.HashMap">
        SELECT LOOKUP_DESC AS "KEY" ,LOOKUP_DESC AS "VALUE" FROM LOOKUP_MASTER WHERE   
        AUTHORIZED = 'Y' AND LOOKUP_ID = #LOOKUP_ID:VARCHAR#
    </mapped-statement>
    <mapped-statement name="getZonalForEmpMaster"  result-class="java.util.HashMap">
        SELECT DISTINCT ZONAL_ID AS "KEY" ,ZONAL_ID AS "VALUE" FROM BRANCH_MASTER WHERE STATUS NOT IN ('DELETED') AND 
        AUTHORIZE_STATUS_1 = 'AUTHORIZED'
    </mapped-statement>
    <mapped-statement name="getBranchForEmpMaster"  result-class="java.util.HashMap">
        SELECT DISTINCT BRANCH_CODE AS "KEY" ,BRANCH_CODE AS "VALUE" FROM BRANCH_MASTER WHERE STATUS NOT IN ('DELETED') AND 
        AUTHORIZE_STATUS_1 = 'AUTHORIZED'
    </mapped-statement>
        
        
</sql-map>        
