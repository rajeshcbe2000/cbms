<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sql-map PUBLIC "-//iBATIS.com//DTD SQL Map 1.0//EN" "http://www.ibatis.com/dtd/sql-map.dtd">
<sql-map name="EmployeeMasterMap">

	<!-- Use CustomerTO object (JavaBean) properties as parameters for insert. 
	     Each of the parameters in the #hash# symbols is a JavaBeans property. -->
    <mapped-statement name="insertEmployeeMasterTO" inline-parameters="true">

        INSERT INTO EMPLOYEE_MASTER (SYS_EMPID , EMPLOYEEID ,TITLE ,FIRST_NAME  ,MIDDLE_NAME ,LAST_NAME ,
        FATHER_TITLE ,FATHER_FIRSTNAME ,FATHERMIDDLE_NAME ,FATHERLAST_NAME ,
        MOTHER_TITLE ,MOTHERFIRST_NAME ,MOTHERMIDDLE_NAME ,MOTHERLAST_NAME ,
        GENDER ,MARITALSTATUS ,FATHER_HUSBAND ,DOB,AGE ,
        PLACE_OF_BIRTH  ,RELIGION ,CASTE ,HOME_TOWN ,IDCARD_NO ,
        UNIQUE_ID ,PAN_NUMBER ,PF_NUMBER ,PF_NOMINEE ,DATE_OF_JOIN,DATE_OF_RETIREMENT,
        STATUS_BY ,STATUS ,STATUS_DT,CREATED_BY ,CREATED_DATE,DL_NO,DL_RENEWAL_DATE,DOMICILE_STATE,BLOOD_GROUP,PHYSICALHANDICAP,MAJOR_HEALTH_PROBLEM,EMAIL_ID
        )
        VALUES(#sysId:varchar#,#txtEmpId:varchar#,#cboEmpTitle:varchar#,#txtEmpFirstName:varchar#,#txtEmpMiddleName:varchar#,#txtEmpLastName:varchar#,
        #cboEmpFatheTitle:varchar#,#txtEmpFatherFirstName:varchar#,#txtEmpFatherMIddleName:varchar#,#txtEmpFatherLasteName:varchar#,
        #cboEmpMotherTitle:varchar#,#txtEmpMotherFirstName:varchar#,#txtEmpMotherMIddleName:varchar#,#txtEmpMotherLasteName:varchar#,
        #rdoEmpGender:varchar#,#rdoMaritalStatus:varchar#,#rdoFatherHusband:varchar#,#tdtEmpDateOfBirth:date#,#txtempAge:varchar#,
        #txtempPlaceOfBirth:varchar#,#cboEmpReligon:varchar#,#cboEmpCaste:varchar#,
        #txtEmpHomeTown:varchar#,#txtEmpIdCardNo:varchar#,#txtEmpUIdNo:varchar#,#txtEmpPanNo:varchar#,
        #txtEmpPfNo:varchar#,#cboEmpPfNominee:varchar#,#tdtEmpJoinDate:date#,#tdtEmpRetirementDate:date#,
        #createdBy:varchar#,#status:varchar#,#createdDt:date#,#createdBy:varchar#,#createdDt:date#
        ,#txtDrivingLicenceNo:varchar#,#tdtDLRenewalDate:DATE#,#cboDomicileState:varchar#,#cboBloodGroup:varchar#,#txtPhysicalHandicap:varchar#,
        #txtMajorHealthProbeem:varchar#,#txtEmailId:varchar#)

    </mapped-statement>

   <!-- <mapped-statement name="insertEmployeeAddressTO" inline-parameters="true">
            INSERT INTO emp_ADDR
            (  EMP_SYS_ID, STREET, AREA, CITY, STATE, PIN_CODE, COUNTRY_CODE, ADDR_TYPE, PHONECOUNTRY_CODE,PHONEAREA_CODE,PHONE_NO
            , MOBILECOUNTRY_CODE,MOBILEAREA_CODE ,MOBILE_NO, STATUS,STATUS_BY,  STATUS_DT )
            VALUES (
            #txtEmpId:VARCHAR#, #txtEmpStreet:VARCHAR#, #txtEmpArea:VARCHAR#, #cboEmpCity:VARCHAR#, #cboEmpState:VARCHAR#,
            #txtEmpPinNo:VARCHAR#, #cboEmpCountry:VARCHAR#, #cboEmpAddressType:VARCHAR#,
            #txtEmpPhoneNoCountryCode:VARCHAR#,#txtEmpPhoneNoAreaCode:VARCHAR#,#txtEmpPhoneNo:VARCHAR#,
            #txtEmpMobileNoCountryCode:VARCHAR#,#txtEmpMobileNoAreaCode:VARCHAR#,#txtEmpMobileNo:VARCHAR#,
            #status:VARCHAR#,#statusBy:VARCHAR#,#statusDt:DATE#)
	</mapped-statement>-->
        
    <result-map name="getEmployeeMasterTOResult" class="com.see.truetransact.transferobject.employee.EmployeeMasterTO">
        <property name="sysId" column="SYS_EMPID"/>
        <property name="txtEmpId" column="EMPLOYEEID"/>
        <property name="cboEmpTitle" column="TITLE"/>
        <property name="txtEmpFirstName" column="FIRST_NAME"/>
        <property name="txtEmpMiddleName" column="MIDDLE_NAME"/>
        <property name="txtEmpLastName" column="LAST_NAME"/>
        <property name="cboEmpFatheTitle" column="FATHER_TITLE"/>
        <property name="txtEmpFatherFirstName" column="FATHER_FIRSTNAME"/>
        <property name="txtEmpFatherMIddleName" column="FATHERMIDDLE_NAME"/>
        <property name="txtEmpFatherLasteName" column="FATHERLAST_NAME"/>
        <property name="cboEmpMotherTitle" column="MOTHER_TITLE"/>
        <property name="txtEmpMotherFirstName" column="MOTHERFIRST_NAME"/>
        <property name="txtEmpMotherMIddleName" column="MOTHERMIDDLE_NAME"/>
        <property name="txtEmpMotherLasteName" column="MOTHERLAST_NAME"/>
        <property name="rdoEmpGender" column="GENDER"/>
        <property name="rdoMaritalStatus" column="MARITALSTATUS"/>
        <property name="rdoFatherHusband" column="FATHER_HUSBAND"/> 
        <property name="tdtEmpDateOfBirth" column="DOB"/>
        <property name="txtempAge" column="AGE"/>
        <property name="txtempPlaceOfBirth" column="PLACE_OF_BIRTH"/>                     
        <property name="cboEmpReligon" column="RELIGION"/>
        <property name="cboEmpCaste" column="CASTE"/>                
        <property name="txtEmpHomeTown" column="HOME_TOWN"/>        
        <property name="txtEmpIdCardNo" column="IDCARD_NO"/>         
        <property name="txtEmpUIdNo" column="UNIQUE_ID"/>
        <property name="txtEmpPanNo" column="PAN_NUMBER"/>
        <property name="txtEmpPfNo" column="PF_NUMBER"/>
        <property name="cboEmpPfNominee" column="PF_NOMINEE"/>
        <property name="tdtEmpJoinDate" column="DATE_OF_JOIN"/>
        <property name="tdtEmpRetirementDate" column="DATE_OF_RETIREMENT"/>       
        <property name="statusBy" column="STATUS_BY"/>          
        <property name="status" column="STATUS"/>  
        <property name="statusDt" column="STATUS_DT"/>
<!--		<property name="photoFile" column="PHOTO_FILE"/>
		<property name="signatureFile" column="SIGNATURE_FILE"/>  -->
        <property name="createdBy" column="CREATED_BY"/>
        <property name="createdDt" column="CREATED_DATE"/>
        <property name="authorizedBy" column="AUTHORIZED_BY"/>
        <property name="authorizedDt" column="AUTHORIZED_DT"/>
        <property name="authorizeStatus" column="AUTHORIZE_STATUS"/>
        <property name="txtDrivingLicenceNo" column="DL_NO"/>
        <property name="tdtDLRenewalDate" column="DL_RENEWAL_DATE"/>
        <property name="cboDomicileState" column="DOMICILE_STATE"/>
        <property name="cboBloodGroup" column="BLOOD_GROUP"/>
        <property name="txtPhysicalHandicap" column="PHYSICALHANDICAP"/>
        <property name="txtMajorHealthProbeem" column="MAJOR_HEALTH_PROBLEM"/>
        <property name="txtEmailId" column="EMAIL_ID"/>
                
                
    </result-map>
             
    <mapped-statement name="updateEmployeeMasterTO" inline-parameters="true">
        update employee_master SET 
        EMPLOYEEID=#txtEmpId:varchar# ,
        TITLE =#cboEmpTitle:varchar#,
        FIRST_NAME = #txtEmpFirstName:varchar#,
        MIDDLE_NAME=#txtEmpMiddleName:varchar# ,
        LAST_NAME=#txtEmpLastName:varchar# ,
        FATHER_TITLE= #cboEmpFatheTitle:varchar#,
        FATHER_FIRSTNAME= #txtEmpFatherFirstName:varchar#,
        FATHERMIDDLE_NAME= #txtEmpFatherMIddleName:varchar#,
        FATHERLAST_NAME= #txtEmpFatherLasteName:varchar#,
        MOTHER_TITLE=  #cboEmpMotherTitle:varchar#,
        MOTHERFIRST_NAME= #txtEmpMotherFirstName:varchar#,
        MOTHERMIDDLE_NAME= #txtEmpMotherMIddleName:varchar#,
        MOTHERLAST_NAME=#txtEmpMotherLasteName:varchar#,
        GENDER= #rdoEmpGender:varchar#,
        MARITALSTATUS=#rdoMaritalStatus:varchar# ,
        FATHER_HUSBAND= #rdoFatherHusband:varchar#,
        DOB=#tdtEmpDateOfBirth:date#,
            <!--AGE= #txtempAge:varchar#,-->
        PLACE_OF_BIRTH = #txtempPlaceOfBirth:varchar#,
        RELIGION=#cboEmpReligon:varchar# ,
        CASTE= #cboEmpCaste:varchar#,
        HOME_TOWN= #txtEmpHomeTown:varchar# ,
        IDCARD_NO= #txtEmpIdCardNo:varchar# ,
        UNIQUE_ID= #txtEmpUIdNo:varchar#  ,
        PAN_NUMBER= #txtEmpPanNo:varchar#,
        PF_NUMBER= #txtEmpPfNo:varchar#,
        PF_NOMINEE= #cboEmpPfNominee:varchar# ,
        DATE_OF_JOIN=#tdtEmpJoinDate:date#,
        DATE_OF_RETIREMENT=#tdtEmpRetirementDate:date#,
        STATUS_BY= #statusBy:varchar#,
        STATUS= #status:varchar#,
        STATUS_DT=#statusDt:Date#,
        DL_NO=#txtDrivingLicenceNo:varchar#,
        DL_RENEWAL_DATE =#tdtDLRenewalDate:DATE# ,
        DOMICILE_STATE =#cboDomicileState:varchar#,
        BLOOD_GROUP =#cboBloodGroup:varchar#,
        PHYSICALHANDICAP =#txtPhysicalHandicap:varchar#,
        MAJOR_HEALTH_PROBLEM =#txtMajorHealthProbeem:varchar#,
        EMAIL_ID=#txtEmailId:varchar#,
        AUTHORIZE_STATUS = NULL,
        AUTHORIZED_BY = NULL
        where SYS_EMPID=#sysId:varchar#
    </mapped-statement>
        
    <dynamic-mapped-statement name="getSelectEmployeeMasterTOList" result-class="java.util.LinkedHashMap" >
        SELECT SYS_EMPID as SYSTEM_NO, EMPLOYEEID AS "Employee No", FIRST_NAME|| ' '|| MIDDLE_NAME || ' '|| LAST_NAME AS "Name"
        FROM  EMPLOYEE_MASTER
        WHERE  ((STATUS NOT IN ('DELETED')))  
               
        <dynamic>
            <isParameterPresent>
                <isNotNull prepend = "AND" property = "CUSTOMER ID">
                           <!-- CUST_ID = #CUSTOMER ID#-->
                </isNotNull>
            </isParameterPresent>
        </dynamic>
    </dynamic-mapped-statement>  
        
    <dynamic-mapped-statement name="getSelectEmployeeMasterStaffId" result-class="java.util.LinkedHashMap" >
        SELECT SYS_EMPID as SYSTEM_NO, EMPLOYEEID AS "Employee No", FIRST_NAME, MIDDLE_NAME , LAST_NAME ,TITLE
        FROM  EMPLOYEE_MASTER
        WHERE  ((STATUS NOT IN ('DELETED')))  
               
        <dynamic>
            <isParameterPresent>
                <isNotNull prepend = "AND" property = "CUSTOMER ID">
                           <!-- CUST_ID = #CUSTOMER ID#   AND SYS_EMPID NOT IN (SELECT SYS_EMPID FROM EMPLOYEE_MASTER WHERE SYS_EMPID = #SYS_EMPID:varchar#)-->
                </isNotNull>
            </isParameterPresent>
        </dynamic>
    </dynamic-mapped-statement>  
        
    <mapped-statement name="getSelectEmployeeMasterTO" result-map="getEmployeeMasterTOResult" >
        SELECT * FROM EMPLOYEE_MASTER 
        WHERE SYS_EMPID = #SYS_EMPID:VARCHAR# 
    </mapped-statement>
    <mapped-statement name="authStatusEmployeMaster"  result-class="java.util.HashMap">
        SELECT AUTHORIZED_DT FROM EMPLOYEE_MASTER  WHERE SYS_EMPID = #SYS_EMPID:VARCHAR# 
    </mapped-statement>
    
    <mapped-statement name="empIdExistanceCheck"  result-class="java.util.HashMap">
        select first_name||' ' ||MIDDLE_NAME||' '|| last_NAMe as EMP_NAME   from employee_master        
        where status!='DELETED'  AND (AUTHORIZE_STATUS  IS NULL  OR AUTHORIZE_STATUS !='REJECTED') 
        AND EMPLOYEEID=#EMPLOYEEID:VARCHAR#
    </mapped-statement>
    <dynamic-mapped-statement name="authorizeIndEmployee" result-class="java.util.HashMap">
        UPDATE EMPLOYEE_MASTER SET 
        AUTHORIZE_STATUS = #STATUS:VARCHAR#,
        AUTHORIZED_BY = #USER_ID:VARCHAR#, 
        AUTHORIZED_DT = #AUTHORIZEDT:TIMESTAMP#
                
        WHERE EMPLOYEEID = #EMPLOYEEID:VARCHAR# 
    </dynamic-mapped-statement>
    <dynamic-mapped-statement name="authorizeIndPromotion" result-class="java.util.HashMap">
        UPDATE PROMOTION_DETAILS SET 
        AUTHORIZE_STATUS = #STATUS:VARCHAR#,
        AUTHORIZED_BY = #USER_ID:VARCHAR#, 
        AUTHORIZED_DT = #AUTHORIZEDT:TIMESTAMP#
        WHERE EMP_ID = #SYS_EMPID:VARCHAR# 
        AND SL_NO = #SL_NO:VARCHAR# 
        AND STATUS != 'DELETED' 
    </dynamic-mapped-statement>
        
    <dynamic-mapped-statement name="getSelectIndiAuthorizeTOList" result-class="java.util.LinkedHashMap" >
        SELECT  SYS_EMPID AS "SYS_EMP_ID" , FIRST_NAME ||' '||MIDDLE_NAME||' '||LAST_NAME as "EMPLOYEE NAME",
        (SELECT LOOKUP_DESC FROM LOOKUP_MASTER WHERE LOOKUP_ID = 'EMPLOYEETYPE' 
        AND LOOKUP_REF_ID = 'EMPLOYEE') AS "Employee_Type" ,STATUS,STATUS_BY 
        FROM EMPLOYEE_MASTER C WHERE cast(#HIERARCHY_ID# as numeric)>= (SELECT DISTINCT DECODE(NVL(SAME_HIERARCHY_ALLOWED,'N'), 'Y', HIERARCHY_ID, HIERARCHY_ID + 1)
        FROM USER_MASTER UM, ROLE_MASTER RM WHERE RM.ROLE_ID = UM.USER_ROLE AND UM.USER_ID = C.STATUS_BY)
        <dynamic>
            <isEqual prepend="AND" property="AUTHORIZESTATUS" compareValue="EXCEPTION" >
                C.AUTHORIZE_STATUS = 'EXCEPTION'
            </isEqual>
            <isNotEqual prepend="AND" property="AUTHORIZESTATUS" compareValue="EXCEPTION" >
                (C.AUTHORIZE_STATUS IS NULL OR 
                C.AUTHORIZE_STATUS NOT IN ('AUTHORIZED', 'REJECTED', 'EXCEPTION'))
            </isNotEqual>
        </dynamic>
        AND C.STATUS_BY != #USER_ID:VARCHAR# ORDER BY SYS_EMPID 
    </dynamic-mapped-statement>  
   <!-- <mapped-statement name="deleteEmployeePassPortTO" inline-parameters="true">
		UPDATE EMPLOYEEMASTER_PASSPORT SET 
		STATUS = #status:VARCHAR#
            WHERE SYS_EMP_ID = #SYS_EMPID# 
	</mapped-statement> -->
</sql-map>
